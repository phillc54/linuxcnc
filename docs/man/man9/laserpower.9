.\" -*- mode: troff; coding: utf-8 -*-
.\"*******************************************************************
.\"
.\" This file was extracted from hal/components/laserpower.comp using halcompile.g.
.\" Modify the source file.
.\"
.\"*******************************************************************

.TH LASERPOWER "9" "2025-05-27" "LinuxCNC Documentation" "HAL Component"
.SH NAME

laserpower \- Scales laser power output based upon velocity input power and distance to go
.SH SYNOPSIS
.HP
.B loadrt laserpower [count=\fIN\fB|names=\fIname1\fB[,\fIname2...\fB]]
.SH DESCRIPTION

During operation laserpower must be scaled proportionally to actual velocity vs commanded velocity.
               This prevents uneven laser power when rounding tight corners.
            
            laserpower operates in 2 modes. 
                Raster mode (when raster_mode = 1). 
                    During raster mode raster_power is scaled between min_power and max_power proportionally to req_velocity and cur_velocity.

                Velocity mode (when raster_mode = 0). 
                    During velocity mode vector_power corresponds to the power level desired when reaching the next control point.
                    This allows vector power to be scaled along moves.
            
.SH FUNCTIONS
.TP
\fBlaserpower.\fIN\fB\fR (requires a floating-point thread)

.SH PINS
.TP
.B laserpower.\fIN\fB.min-power\fR float in \fR
Minimum allowed power level. 
.TP
.B laserpower.\fIN\fB.max-power\fR float in \fR
Maximum allowed power level
.TP
.B laserpower.\fIN\fB.req-velocity\fR float in \fR
Requested motion velocity
.TP
.B laserpower.\fIN\fB.cur-velocity\fR float in \fR
Current motion velocity
.TP
.B laserpower.\fIN\fB.enabled\fR bit in \fR
True when laser output enabled
.TP
.B laserpower.\fIN\fB.raster-mode\fR bit in \fR
false for vector mode, true for raster mode
.TP
.B laserpower.\fIN\fB.raster-power\fR float in \fR
Requested power level during raster operations
.TP
.B laserpower.\fIN\fB.vector-power\fR float in \fR
Requested power level during vector operations
.TP
.B laserpower.\fIN\fB.distance-to-go\fR float in \fR
Distance to go of current move
.TP
.B laserpower.\fIN\fB.power\fR float out \fR
Current power level command
.TP
.B laserpower.\fIN\fB.command-power\fR float out \fR
Commanded power before normalization and velocity scaling
.TP
.B laserpower.\fIN\fB.start-power\fR float out \fR
Power level when reqPower last changed
.TP
.B laserpower.\fIN\fB.start-distance\fR float out \fR
Distance amount when reqPower last changed
.TP
.B laserpower.\fIN\fB.vel-scale\fR float out \fR
Velocity related scaling component.
.SH LICENSE

GPL
