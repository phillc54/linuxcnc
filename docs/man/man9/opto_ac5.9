'\" t
.\"     Title: opto_ac5
.\"    Author: [FIXME: author] [see http://www.docbook.org/tdg5/en/html/author]
.\" Generator: DocBook XSL Stylesheets vsnapshot <http://docbook.sf.net/>
.\"      Date: 05/27/2025
.\"    Manual: LinuxCNC Documentation
.\"    Source: LinuxCNC
.\"  Language: English
.\"
.TH "OPTO_AC5" "9" "05/27/2025" "LinuxCNC" "LinuxCNC Documentation"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
opto_ac5 \- Realtime driver for opto22 PCI\-AC5 cards
.SH "SYNOPSIS"
.sp
\fBloadrt opto_ac5\fR [\fBportconfig0=0x\fR\fIN\fR] [\fBportconfig1=0x\fR\fIN\fR]
.SH "DESCRIPTION"
.sp
These pins and parameters are created by the realtime \fBopto_ac5\fR module\&. The portconfig0 and portconfig1 variables are used to configure the two ports of each card\&. The first 24 bits of a 32 bit number represent the 24 i/o points of each port\&. The lowest (rightmost) bit would be HAL pin 0 which is header connector pin 47\&. Then next bit to the left would be HAL pin 1, header connector pin 45 and so on, until bit 24 would be HAL pin 23, header connector pin 1\&. "1" bits represent output points\&. So channel 0\&.\&.11 as inputs and 12\&.\&.23 as outputs would be represented by (in binary) 111111111111000000000000 which is 0xfff000 in hexadecimal\&. That is the number you would use, e\&.g\&., loadrt opto_ac5 portconfig0=0xfff000\&.
.sp
If no portconfig variable is specified the default configuration is 12 inputs then 12 outputs\&.
.sp
Up to 4 boards are supported\&. Boards are numbered starting at 0\&.
.sp
Portnumber can be 0 or 1\&. Port 0 is closest to the card bracket\&.
.SH "PINS"
.PP
\fBopto_ac5\&.\fR\fIBOARDNUMBER\fR\fB\&.port\&.\fR\fIPORTNUMBER\fR\fB\&.in\-\fR\fIPINNUMBER\fR OUT bit
.RS 4
.RE
.PP
\fBopto_ac5\&.\fR\fIBOARDNUMBER\fR\fB\&.port\&.\fR\fIPORTNUMBER\fR\fB\&.in\-\fR\fIPINNUMBER\fR\fB\-not\fR OUT bit
.RS 4
Connect a HAL bit signal to this pin to read an i/o point from the card\&. The PINNUMBER represents the position in the relay rack\&. E\&.g\&., PINNUMBER 0 is position 0 in a opto22 relay rack and would be pin 47 on the 50 pin header connector\&. The
\fB\-not\fR
pin is inverted so that LOW gives TRUE and HIGH gives FALSE\&.
.RE
.PP
\fBopto_ac5\&.\fR\fIBOARDNUMBER\fR\fB\&.port\&.\fR\fIPORTNUMBER\fR\fB\&.out\-\fR\fIPINNUMBER\fR IN bit
.RS 4
Connect a HAL bit signal to this pin to write to an i/o point of the card\&. The PINNUMBER represents the position in the relay rack\&. E\&.g\&., PINNUMBER 23 is position 23 in a opto22 relay rack and would be pin 1 on the 50 pin header connector\&.
.RE
.PP
\fBopto_ac5\&.\fR\fIBOARDNUMBER\fR\fB\&.led\&.\fR\fINUMBER\fR OUT bit
.RS 4
Turns one of the on board LEDS on/off\&. LEDS are numbered 0 to 3\&.
.RE
.SH "PARAMETERS"
.PP
\fBopto_ac5\&.\fR\fIBOARDNUMBER\fR\fB\&.port\&.\fR\fIPORTNUMBER\fR\fB\&.out\-\fR\fIPINNUMBER\fR\fB\-invert\fR W bit
.RS 4
When TRUE, invert the meaning of the corresponding
\fB\-out\fR
pin so that TRUE gives LOW and FALSE gives HIGH\&.
.RE
.SH "FUNCTIONS"
.PP
\fBopto_ac5\&.0\&.digital\-read\fR
.RS 4
Add this to a thread to read all the input points\&.
.RE
.PP
\fBopto_ac5\&.0\&.digital\-write\fR
.RS 4
Add this to a thread to write all the output points and LEDS\&.
.RE
.SH "BUGS"
.sp
All boards are loaded with the same port configurations as the first board\&.
.SH "SEE ALSO"
.sp
https://wiki\&.linuxcnc\&.org/cgi\-bin/wiki\&.pl?OptoPciAc5
